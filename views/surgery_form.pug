extends layout

block content
  script(type='text/javascript').
    $(document).ready(function() {
      $('#doctor').multiselect({
        buttonWidth: '37vw',
        enableFiltering: true,
        enableCaseInsensitiveFiltering: true
      });
    });
  if errors
    h3.text-center Please correct following items first:
    for error in errors
      h4.red-text.col-sm-offset-4!= error.msg
  form.col-sm-offset-4(method='POST' action='').col-sm-6
    h1= title
    div.form-group
      label(for='doctor') Doctor: 
      br
      select#doctor.form-control(type='select' name='doctor' required='true', multiple='multiple') 
        for doctor in doctors
          if surgery
            option(value=doctor._id selected=(doctor._id===surgery.doctor._id ? 'selected' : false) ) #{doctor.name}
          else
            option(value=doctor._id) #{doctor.name}
    div.form-group
      label(for='patient') Patient:
      select#patient.form-control(type='select', placeholder='Select patient' name='patient' required='true' )
        for patient in patients
          if surgery
            option(value=patient._id selected=(patient._id.toString()==surgery.patient._id.toString() ? 'selected' : false) ) #{patient.name}
          else
            option(value=patient._id) #{patient.name}
    div.form-group
      label(for='start_date') Surgery start date:
      input#start_date.form-control(type='date', name='start_date' value=(undefined===surgery ? '' : surgery.start_date)  required='true' )
    div.form-group
      label(for='start_time') Surgery start time:
      input#start_time.form-control(type='time', name='start_time' value=(undefined===surgery ? '' : surgery.start_time)  required='true' )
    div.form-group
      label(for='end_date') Surgery end date:
      input#end_date.form-control(type='date', name='end_date', min= 'start_date' value=(undefined===surgery ? '' : surgery.end_date)  required='true')
    div.form-group
      label(for='end_time') Surgery end time:
      input#end_time.form-control(type='time', name='end_time', value=(undefined===surgery ? '' : surgery.end_time)  required='true')
    div.form-group
      label(for='status') Status:
      select#status.form-control(type='select', placeholder='Select status' name='status' required='true' )
        option(value='Active' selected=(undefined===surgery || surgery.status!='Active' ? false:'selected')) Active
        option(value='Inactive' selected=(undefined===surgery || surgery.status!='Inactive' ? false:'selected')) Inactive
    br
    button.btn.btn-primary.btn-lg.center-block(type='submit') Submit
